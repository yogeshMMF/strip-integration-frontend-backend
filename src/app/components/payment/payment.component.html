<div class="payment-container">
  <div class="payment-card">
    <h1>Stripe Payment Gateway</h1>
    <p class="subtitle">Secure payment processing with Stripe</p>

    <!-- Success Message -->
    <div *ngIf="paymentSuccess" class="alert alert-success">
      <div class="success-icon">âœ“</div>
      <h3>Payment Successful!</h3>
      <p>Your payment has been processed successfully.</p>
      <p class="payment-id">Payment ID: {{ paymentIntentId }}</p>
      <button (click)="resetPaymentStatus()" class="btn btn-primary">
        Make Another Payment
      </button>
    </div>

    <!-- Payment Form -->
    <div *ngIf="!paymentSuccess" class="payment-form">
      <!-- Error Message -->
      <div *ngIf="paymentError" class="alert alert-error">
        <strong>Error:</strong> {{ paymentError }}
      </div>

      <!-- Customer Information -->
      <div class="form-section">
        <h3>Customer Information</h3>

        <div class="form-group">
          <label for="customerName">Full Name *</label>
          <input
            type="text"
            id="customerName"
            [(ngModel)]="customerName"
            placeholder="John Doe"
            [disabled]="isProcessing"
            class="form-control"
          />
        </div>

        <div class="form-group">
          <label for="customerEmail">Email Address *</label>
          <input
            type="email"
            id="customerEmail"
            [(ngModel)]="customerEmail"
            placeholder="john@example.com"
            [disabled]="isProcessing"
            class="form-control"
          />
        </div>
      </div>

      <!-- Payment Details -->
      <div class="form-section">
        <h3>Payment Details</h3>

        <div class="form-group">
          <label for="amount">Amount ({{ currency.toUpperCase() }}) *</label>
          <div class="amount-input">
            <span class="currency-symbol">$</span>
            <input
              type="number"
              id="amount"
              [(ngModel)]="amount"
              min="0.50"
              step="0.01"
              [disabled]="isProcessing"
              class="form-control"
            />
          </div>
        </div>

        <div class="form-group">
          <label>Card Details *</label>
          <div #cardElement class="card-element"></div>
          <p class="card-hint">
            Test card: 4242 4242 4242 4242 | Any future date | Any 3 digits
          </p>
        </div>
      </div>

      <!-- Submit Button -->
      <button
        (click)="handlePayment()"
        [disabled]="isProcessing"
        class="btn btn-pay"
      >
        <span *ngIf="!isProcessing"> Pay ${{ amount.toFixed(2) }} </span>
        <span *ngIf="isProcessing" class="processing">
          <span class="spinner"></span>
          Processing...
        </span>
      </button>

      <!-- Security Badge -->
      <div class="security-badge">
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
        >
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        Secured by Stripe
      </div>
    </div>
  </div>
</div>
